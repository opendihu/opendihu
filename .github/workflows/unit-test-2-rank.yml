name: unit-tests-2-rank
on:
  pull_request:
    branches: [ github-actions ]
jobs:
  container-test-job:
    runs-on: ubuntu-latest
    container: maierbn/opendihu:latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3
        with:
          path: opendihu         
      - name: Build tests
        working-directory: opendihu/testing/unit_testing
        run: python3 ../../dependencies/scons/scons.py BUILD_TYPE=RELEASE
      - name: Run tests
        working-directory: opendihu/testing/unit_testing/build_release
        run: ./2_rank_tests  
